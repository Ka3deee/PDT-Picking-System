<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="PDTPickingSystem.Views.PickingPage"
             Title="Picking Page"
             BackgroundColor="#FFF8E1"
             Padding="10">

    <ScrollView>
        <StackLayout Spacing="10">

            <!-- User Label -->
            <Label x:Name="lblUser"
                   FontAttributes="Bold"
                   FontSize="Medium"
                   TextColor="#333"/>

            <!-- Barcode Entry -->
            <Entry x:Name="txtBarcode"
                   Placeholder="Scan or enter barcode"
                   Completed="TxtBarcode_Completed"
                   Keyboard="Text"
                   ReturnType="Done"/>

            <!-- SKU & Qty Panel -->
            <Grid Padding="5" ColumnSpacing="5" RowSpacing="5">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Label Text="SKU" Grid.Row="0" Grid.Column="0"/>
                <Entry x:Name="txtSKU" Grid.Row="1" Grid.Column="0" IsReadOnly="True"/>

                <Label Text="Case Qty" Grid.Row="0" Grid.Column="1"/>
                <Entry x:Name="txtCase" Grid.Row="1" Grid.Column="1"/>

                <Label Text="Each Qty" Grid.Row="0" Grid.Column="2"/>
                <Entry x:Name="txtpEach" Grid.Row="1" Grid.Column="2"/>
            </Grid>

            <!-- Navigation & Confirm Panel -->
            <StackLayout Orientation="Horizontal" Spacing="10">
                <Button x:Name="btnConfirm"
                        Text="Confirm"
                        Clicked="BtnConfirm_Clicked"
                        HorizontalOptions="FillAndExpand"/>
                <Button x:Name="btnNext"
                        Text="Next"
                        Clicked="BtnNavigate_Clicked"
                        HorizontalOptions="FillAndExpand"/>
            </StackLayout>

            <!-- Line navigation -->
            <Grid Padding="5" ColumnSpacing="5" RowSpacing="5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <Entry x:Name="txtLine"
                       Placeholder="Line #"
                       Completed="TxtLine_Completed"
                       Grid.Column="0"/>

                <Button x:Name="btnGoto"
                        Text="Go"
                        Clicked="BtnGoto_Clicked"
                        Grid.Column="1"/>

                <Button x:Name="btnCloseGoto"
                        Text="Close"
                        Clicked="BtnCloseGoto_Clicked"
                        Grid.Column="2"/>
            </Grid>

            <!-- Stocker Confirmation Panel -->
            <StackLayout x:Name="pnlConfirm" IsVisible="False">
                <Label Text="Enter Stocker ID:"/>
                <Entry x:Name="txtStocker" Completed="ConfirmStocker"/>
                <Button x:Name="btnConfirmStocker" Text="Confirm Stocker" Clicked="ConfirmStocker"/>
            </StackLayout>

            <!-- CollectionView for SKU List -->
            <CollectionView x:Name="cvSKU"
                            ItemsSource="{Binding SKUList}"
                            SelectionMode="None"
                            HeightRequest="200">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Grid Padding="5" ColumnSpacing="5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Label Text="{Binding SKU}" Grid.Column="0"/>
                            <Label Text="{Binding Descr}" Grid.Column="1"/>
                            <Label Text="{Binding DisplayQty}" Grid.Column="2"/>
                        </Grid>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!-- CollectionView for Slot List -->
            <CollectionView x:Name="cvSlots"
                            ItemsSource="{Binding SlotList}"
                            SelectionMode="None"
                            HeightRequest="150">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Label Text="{Binding .}" Padding="5"/>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!-- CollectionView for Barcode List -->
            <CollectionView x:Name="cvBarcodes"
                            ItemsSource="{Binding BarcodeList}"
                            SelectionMode="None"
                            HeightRequest="150">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Label Text="{Binding .}" Padding="5"/>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </StackLayout>
    </ScrollView>
</ContentPage>
